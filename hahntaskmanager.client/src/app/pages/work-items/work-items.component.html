<div class="flex flex-col h-screen">
  <!-- Header -->
  <app-header></app-header>

  <!-- Project Header -->
  <app-project-header (newWorkItem)="onNewWorkItem()"
                      (export)="onExport()"
                      (import)="onImport()"
                      (settings)="onSettings()">
  </app-project-header>

  <!-- View Tabs -->
  <app-view-tabs [currentView]="currentView"
                 (viewChanged)="onViewChanged($event)">
  </app-view-tabs>

  <!-- Filter Bar -->
  <app-filter-bar (filterChanged)="onFilterChanged($event)"
                  (sortChanged)="onSortChanged($event)">
  </app-filter-bar>

  <!-- Main Content -->
  <div class="flex-1 overflow-auto p-6">
    <!-- Loading State -->
    <div *ngIf="isLoading" class="flex justify-center items-center h-64">
      <div class="text-center">
        <i class="fas fa-spinner fa-spin text-2xl text-blue-600 mb-2"></i>
        <p class="text-gray-600">Loading work items...</p>
      </div>
    </div>

    <!-- Grid View -->
    <app-grid-view *ngIf="currentView === ViewType.GRID && !isLoading"
                   [workItems]="workItems"
                   (workItemAction)="onWorkItemAction($event)"
                   (editWorkItem)="onEditWorkItem($event)"
                   (deleteWorkItem)="onDeleteWorkItem($event)">
    </app-grid-view>

    <!-- Board View -->
    <app-board-view *ngIf="currentView === ViewType.BOARD && !isLoading"
                    [workItems]="workItems"
                    (workItemStatusChanged)="onWorkItemStatusChanged($event)">
    </app-board-view>
  </div>

  <app-work-item-form *ngIf="showWorkItemForm"
                      [workItem]="selectedWorkItem"
                      [isEditMode]="isEditMode"
                      (saved)="onWorkItemFormSaved()"
                      (cancelled)="showWorkItemForm = false">
  </app-work-item-form>

  <!-- Delete Confirmation Modal -->
  <app-confirmation-modal 
    [isOpen]="showDeleteConfirmation"
    title="Delete Work Item"
    message="Are you sure you want to delete this work item? This action cannot be undone."
    confirmText="Delete"
    (confirmed)="onDeleteConfirmed()"
    (cancelled)="onDeleteCancelled()">
  </app-confirmation-modal>
</div>
